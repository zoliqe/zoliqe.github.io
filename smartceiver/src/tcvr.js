class Transceiver{constructor(){this._band="40m",this._freq={"80m":3542000,"40m":7030000,"30m":10123000,"20m":14060000,"17m":18088000,"15m":21060000},this._wpm=28,this._txEnabled=!0,this._txKeyed=!1,this._autoSpace=!0,this._narrow=!1,this._d("tcvr-init","done")}switchPower(){this._port?(this._port.disconnect(),this._port=void 0):(console.log("connect"),webusb.requestPort().then(a=>{this._port=a,this._connect()}).catch(a=>{console.error("Connection error (1): "+a)}))}_connect(){console.log("Connecting to "+this._port.device_.productName),this._port.connect().then(()=>{console.log("Connected "+this._port),this._port.onReceive=a=>{console.log("Received: "+a)},this._port.onReceiveError=a=>{console.log("Receive error: "+a)},this.freq=this._freq,this.wpm=this._wpm,this.txEnabled=this._txEnabled,this.autoSpace=this._autoSpace,this.txKeyed=this._txKeyed,this.narrow=this._narrow},a=>{console.log("Connection error (2): "+a)})}get band(){return this._band}set band(a){this._band=a,this.freq=this._freq[a],this._d("band",a)}get freq(){return this._freq[this._band]}set freq(a){if(void 0!=this._port){this._freq[this._band]=a,this._d("freq",a);let b="FA000";1e7>a&&(b+="0"),b+=a+";",this._port.send(b)}}get wpm(){return this._wpm}set wpm(a){if(void 0!=this._port){this._wpm=a,this._d("wpm",a);this._port.send("KS"+a+";")}}get narrow(){return this._narrow}set narrow(a){if(void 0!=this._port){this._narrow=a,this._d("narrow",a);let b="RW"+(a?"1":"0")+";";this._port.send(b)}}get txEnabled(){return this._txEnabled}set txEnabled(a){if(void 0!=this._port){this._txEnabled=a,this._d("txEnabled",a);let b="KE"+(a?"1":"0")+";";this._port.send(b)}}get autoSpace(){return this._autoSpace}set autoSpace(a){if(void 0!=this._port){this._autoSpace=a,this._d("autoSpace",a);let b="KA"+(a?"1":"0")+";";this._port.send(b)}}get txKeyed(){return this._txKeyed}set txKeyed(a){if(void 0!=this._port){this._txKeyed=a,this._d("txKeyed",a);let b="KT"+(a?"1":"0")+";";this._port.send(b)}}_d(a,b){console.log(a+"="+b)}}